<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claim GERD Token</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <!-- Add the Firestore service -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    input#wallet-address { width: 275px; }
    input#bwallet-address { width: 275px; }
  </style>

<style>
/* Remove list styling */
.nav-menu {
  list-style-type: none;
  margin: 0;
  padding: 0;
  display: flex;
}

/* Style list items and links */
.nav-menu li {
  margin-right: 35px;
}

.nav-menu li a {
  text-decoration: none;
  color: #240dce;
  font-weight: bold;
}

/* Change link color on hover */
.nav-menu li a:hover {
  color: #14a209;
}

</style>
</head>
<body>
  <nav>
    <ul class="nav-menu">
      <li><a href="index.html">Home</a></li>
      <li><a href="https://pancakeswap.finance/swap?outputCurrency=0x660941bb4AA9FcBED00375673D21088A9d0C5019" target="_blank">PancakeSwap Paper</a></li>
      <li><a href="" target="_self">Claim Token</a></li>
      <li><a href="https://bscscan.com/token/0x660941bb4AA9FcBED00375673D21088A9d0C5019" target="_blank">Contract Address</a></li>
      <li><a href="https://github.com/AbayGERDToken" target="_blank">GitHub</a></li>
    </ul>
  </nav>
  
  <h1>Claim GERD Tokens</h1>
  <span style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">The first 5,000 users in Ethiopia will automatically received 7,500 Abay GERD tokens. Users outside Ethiopia will recieve 1,000 tokens currently.<br><br><br>
  Before proceeding with your claim, please ensure that the Abay GERD token contract has been imported into your wallet, and that you have obtained your GERD token address.<br><br>
  </span>
   
  <form id="send-gerd-form">
    <label for="wallet-address"><span style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Wallet Address:</span></span></label>
    <input type="text" id="wallet-address" name="wallet-address" required>
    <button type="submit">Send Tokens</button>
  </form>
<br><br><br>

  <tr>
      <td style="width:205px">&nbsp;</td>
      <td style="width:993px">
          <!-- Add the input form here -->
          <h2><span style="font-size:18px"><span style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Check your balance </span></span></h2>
          <form>
      <div>
<label for="bwallet-address"><span style="font-size:18px"><span style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Wallet Address: </span></span>
</label>
<input type="text" id="bwallet-address" name="bwallet-address" />
<button type="button" id="check-balance">Check Balance</button>
<div id="balance-result"><span style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Balance: N/A</span></div>
</div>
          </form>
      </td>
  </tr>


  <script src="https://abaygerdtoken.github.io/send-gerd.js"></script>

  <script>
    const web3a = new Web3("https://bsc-dataseed.binance.org/");
  const contractABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},
    {"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
             {"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
             {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balances","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},
             {"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
             {"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}];
  
  const contractAddress = "0x660941bb4AA9FcBED00375673D21088A9d0C5019";
  const gerdContract = new web3a.eth.Contract(contractABI, contractAddress);
  
  document.getElementById("check-balance").addEventListener("click", async () => {
    const walletAddress = document.getElementById("bwallet-address").value;
  
    if (!web3a.utils.isAddress(walletAddress)) {
      alert("Please enter a valid wallet address.");
      document.getElementById("balance-result").innerText = `Balance: 0.00`;
      return;
    }
  
    try {
    const balance = await gerdContract.methods.balanceOf(walletAddress).call();
    const formattedBalance = (balance / 10**2).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    document.getElementById("balance-result").innerText = `Your wallet address balance is: ${formattedBalance} GERD`;
    } catch (error) {
      console.error("Error fetching balance:", error);
      alert("An error occurred while fetching the balance.");
    }
  });
    
  </script>

</body>
</html>
